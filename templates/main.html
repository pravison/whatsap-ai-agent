<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>{% block title %} {% endblock%}- {{title }}</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="{% static 'assets/img/favicon.png' %}" rel="icon">
  <link href="{% static 'assets/img/apple-touch-icon.png' %}" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.gstatic.com" rel="preconnect">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="{% static 'assets/vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/bootstrap-icons/bootstrap-icons.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/boxicons/css/boxicons.min.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/quill/quill.snow.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/quill/quill.bubble.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/remixicon/remixicon.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/simple-datatables/style.css' %}" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="{% static 'assets/css/style.css' %}" rel="stylesheet">
  <link href="{% static 'assets/css/select2.min.css' %}" rel="stylesheet">

  <!-- Date Time -->
  <link rel="stylesheet" href="{% static 'date-time-phone/jquery-ui.css' %}">
  <link rel='stylesheet' href="{% static 'date-time-phone/jquery-ui-timepicker-addon.css' %}" />
  {% block styles %} {% endblock %}
  <script type="text/javascript">
    var user = '{{request.user}}'

    function getToken(name) {

      let cookieValue = null;
      if (document.cookie && document.cookie !== '') {
          const cookies = document.cookie.split(';');
          for (let i = 0; i < cookies.length; i++) {
              const cookie = cookies[i].trim();
              // Does this cookie string begin with the name we want?
              if (cookie.substring(0, name.length + 1) === (name + '=')) {
                  cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                  break;
              }
          }
      }
      return cookieValue;
    }
    const csrftoken = getToken('csrftoken');

    function getCookie(name){
      // split cookie string and get all individual name=value pairs in a string
      var cookieArr = document.cookie.split(";");

      // loop through the array element
      for (var i = 0; i < cookieArr.length ; i++){
        var cookiePair = cookieArr[i].split("=");

        /* removing white space from the cookie name
        and compair it with the given string
        */
        if (name == cookiePair[0].trim()){
          //decode the cookie value and return
          return decodeURIComponent(cookiePair[1]);
        }

      }
      //return null if not found
      return null;
    }

    var cart = JSON.parse(getCookie('cart'))
    if (cart == undefined){
      cart = {}
      console.log('cart was created...')
      document.cookie = 'cart=' + JSON.stringify(cart) + ";domain=;path=/"
    }
    console.log('cart:' , cart)
  </script>
</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="header fixed-top d-flex align-items-center">

    <div class="d-flex align-items-center justify-content-between">
      <a href="{% url 'index' %}" class="logo d-flex align-items-center">
        <span class="d-none d-lg-block">{{title }}</span>
      </a>
    </div><!-- End Logo -->
    
    <i class="bi bi-list toggle-sidebar-btn"></i>

  </header><!-- End Header -->
  <!-- ======= Sidebar ======= -->
<aside id="sidebar" class="sidebar">
 
  {% if request.user.is_staff %}
  <ul class="sidebar-nav" id="sidebar-nav">
    <li class="nav-item">
      <a class="nav-link " href="{% url 'index'%}">
        <i class="bi bi-grid"></i>
        <span>Dashboard</span>
      </a>
    </li><!-- End Dashboard Nav -->

    <li class="nav-item"></li>
    <a class="nav-link collapsed" href="{% url 'leads_warmup_page' %}">
        <i class="bi bi-arrow-clockwise"></i>
        <span>customer follow-up</span>
      </a>
    </li><!-- End Dashboard Nav -->

    <li class="nav-item"></li>
      <a class="nav-link collapsed" href="{% url 'products' %}">
        <i class="bi bi-house"></i>
        <span>Store</span>
      </a>
    </li><!-- End products  Page Nav -->

    <li class="nav-item">
      <a class="nav-link collapsed" data-bs-target="#tables-nav" data-bs-toggle="collapse" href="#">
        <i class="bi bi-chat-dots  "></i><span>Customers Chats</span><i class="bi bi-chevron-down ms-auto"></i>
      </a>
      <ul id="tables-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
        <li>
          <a href="{% url 'chat_lists' %}">
            <i class="bi bi-check"></i><span>Chats Lists</span>
          </a>
        </li>
        <li>
          <a href="{% url 'write_message' %}">
            <i class="bi bi-check"></i><span>Write Message</span>
          </a>
        </li>
      </ul>
    </li><!-- End customers Nav -->

    <li class="nav-item">
      <a class="nav-link collapsed" href="">
        <i class="bi bi-question-circle"></i>
        <span>F.A.Q</span>
      </a>
    </li><!-- End F.A.Q Page Nav -->
  </ul>
  {% endif %}

</aside><!-- End Sidebar-->
  {% block content %}

  {% endblock %}

  <!-- ======= Footer ======= -->
  <footer id="footer" class="footer">
    <div class="copyright">
      &copy; Copyright <strong><span>{{title}}</span></strong>. All Rights Reserved
    </div>
    <div class="credits">powered by Sales Flow Pro</div>
  </footer><!-- End Footer -->

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="{% static 'assets/vendor/apexcharts/apexcharts.min.js' %}"></script>
  <script src="{% static 'assets/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
  <script src="{% static 'assets/vendor/chart.js/chart.umd.js' %}"></script>
  <script src="{% static 'assets/vendor/echarts/echarts.min.js' %}"></script>
  <script src="{% static 'assets/vendor/quill/quill.min.js' %}"></script>
  <script src="{% static 'assets/vendor/simple-datatables/simple-datatables.js' %}"></script>
  <script src="{% static 'assets/vendor/tinymce/tinymce.min.js' %}"></script>
  <script src="{% static 'assets/vendor/php-email-form/validate.js' %}"></script>

  <!-- Template Main JS File -->
  <script src="{% static 'assets/js/main.js' %}"></script>
  <script src="{% static 'assets/js/select2.min.js' %}"></script>

  <script>
    setTimeout(function(){
      if ($('#msg').length > 0) {
        $('#msg').remove();
      }
    }, 2000)
  </script>

<script src="{% static 'date-time-phone/jquery-ui.js' %}" ></script>
<script src="{% static 'date-time-phone/jquery-ui-timepicker-addon.js' %}"></script> 

<script>
  $( function() {
      $( "#pipeline_date" ).datetimepicker({ dateFormat: 'yy-mm-dd', maxDate: 0, controlType: 'select'}).attr("autocomplete", "off") ;
      //$( "#pipeline_date" ).timepicker({ dateFormat: 'yy-mm-dd', maxDate: 0, controlType: 'select'}).attr("autocomplete", "off") ;
      // $( "#ipipeline_date" ).datepicker({ dateFormat: 'yy-mm-dd' }).attr("autocomplete", "off") ;
  });
  </script>

<script src="{% static 'date-time-phone/jquery-input-mask-phone-number.min.js' %}"></script> 
<script>
  //(xxx) xxx-xxxx format code
  $(document).ready(function () {
      $('#id_phone_number').usPhoneFormat({
          format: '(xxx) xxx-xxxx',
      });   
  });
  </script>
{% block script %} {% endblock %}
</body>
</html>